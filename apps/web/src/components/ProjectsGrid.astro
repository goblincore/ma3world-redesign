---
interface Project {
  title: string;
  titleJa: string;
  slug?: string;
  category: string;
  categoryJa: string;
  year: string;
  image?: string;
}

const projects = [
  { 
    title: "Imabari Towel Digital Art Gallery", 
    titleJa: "今治タオル デジタルアートギャラリー",
    slug: "imbari-towel",
    category: "Digital Innovation / Art", 
    categoryJa: "デジタル・イノベーション / アート",
    year: "2024",
    image: "/project/imabari-dag/towelbridge.png"
  },
  { 
    title: "MA3.0 YUA Rice Leather Fukushima Reconstruction Support Cheer Project", 
    titleJa: "MA3.0 YUA ライスレザー福島復興支援応援プロジェクト",
    slug: "fukushima-yuacheer",
    category: "Social Innovation / Design", 
    categoryJa: "ソーシャル・イノベーション / デザイン",
    year: "2024",
    image: "/project/fukushima/yuacheer.jpeg"
  },
];
const base = import.meta.env.BASE_URL;
const assetBase = import.meta.env.PROD ? 'https://ma3worldbunny.b-cdn.net/' : base;
---

<section id="projects" class="bg-theme py-16 md:py-24 lg:py-32 px-6 md:px-12 flex items-center justify-center border-b border-theme">
  <div class="max-w-7xl w-full">
    <!-- Section Header -->
    <div class="flex items-end justify-between mb-16">
      <div>
        <span class="text-xs tracking-widest uppercase text-theme-muted block mb-2">
          <span class="lang-en">Selected Work</span>
          <span class="lang-ja">実績一覧</span>
        </span>
        <h2 class="font-serif text-4xl md:text-6xl">
          <span class="lang-en">Projects</span>
          <span class="lang-ja">プロジェクト</span>
        </h2>
      </div>
      <a href={`${base}projects`} class="hidden md:block text-sm tracking-wide border-b border-current pb-1 hover:opacity-60">
        <span class="lang-en">View all projects</span>
        <span class="lang-ja">全てのプロジェクトを見る</span>
      </a>
    </div>
    
    <!-- Project Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
      {projects.map((project, index) => (
        <a href={`${base}projects/${project.slug || project.title.toLowerCase().replace(' ', '-')}`} class="group block">
          <!-- Image Container -->
          <div class="aspect-[4/3] bg-theme-muted rounded-sm overflow-hidden mb-6 relative">
            {project.image ? (
              <img 
                src={`${assetBase}${project.image.startsWith('/') ? project.image.slice(1) : project.image}`} 
                alt={project.title}
                class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 project-image"
              />
            ) : (
              <>
                <div class="absolute inset-0 bg-theme-alt transition-transform duration-700 project-placeholder-bg"></div>
                <div class="absolute inset-0 flex items-center justify-center">
                  <span class="text-6xl font-serif text-theme-muted transition-opacity project-placeholder-text">
                    0{index + 1}
                  </span>
                </div>
              </>
            )}
          </div>
          
          <!-- Project Info -->
          <div class="flex items-start justify-between">
            <div>
              <h3 class="text-xl md:text-2xl font-medium mb-1 transition-opacity project-title">
                <span class="lang-en" set:html={project.title}></span>
                <span class="lang-ja" set:html={project.titleJa}></span>
              </h3>
              <span class="text-sm text-theme-muted">
                <span class="lang-en">{project.category}</span>
                <span class="lang-ja">{project.categoryJa}</span>
              </span>
            </div>
            <span class="text-sm text-theme-muted">{project.year}</span>
          </div>
        </a>
      ))}
    <!-- Mobile View All Link -->
    <div class="mt-12 md:hidden text-center">
      <a href={`${base}projects`} class="inline-block text-sm tracking-widest border-b border-current pb-1 hover:opacity-60 uppercase font-bold">
        <span class="lang-en">View all projects</span>
        <span class="lang-ja">全てのプロジェクトを見る</span>
      </a>
    </div>
  </div>
</section>

<style>
  h2 {
    font-family: var(--font-serif);
  }

  /* Hover effects only for devices that support hover (prevents double-tap on iOS) */
  @media (hover: hover) {
    .group:hover .project-image,
    .group:hover .project-placeholder-bg {
      transform: scale(1.05);
    }
    
    .group:hover .project-placeholder-text {
      opacity: 0.8;
    }

    .group:hover .project-title {
      opacity: 0.6;
    }
  }
</style>
