---
interface Props {
  title?: string;
  subtitle?: string;
}

const { title = "Digital-first Design Agency", subtitle = "We craft immersive digital experiences" } = Astro.props;
---

<section class="relative h-screen w-full flex items-center justify-center overflow-hidden">
  <!-- Background Video/Image -->
  <div class="absolute inset-0">
    <video
      id="hero-video"
      autoplay
      muted
      loop
      playsinline
      poster="/graphics/yuaheader-placeholder.png"
      class="w-full h-full object-cover"
    >
      <source id="hero-video-source" src="/video/loopingyua.mp4" type="video/mp4" />
      <img 
        src="/graphics/yuaheader-placeholder.png" 
        alt="" 
        class="w-full h-full object-cover"
      />
    </video>
    <div class="absolute inset-0 bg-black/40"></div>
  </div>
  
  <!-- Content -->
  <div class="relative z-10 text-center px-6 max-w-7xl flex flex-col items-center">
    <!-- Logo -->
    <img 
      src="/logo/logo-light.png" 
      alt="MA3.0 World" 
      class="w-150 md:w-200 lg:w-260 mb-8"
    />
    <h1 class="sr-only">
      <span class="lang-en">{title}</span>
      <span class="lang-ja">デジタル・ファーストのデザイン・エージェンシー</span>
    </h1>
  </div>
  
  <!-- Scroll Indicator -->
  <div class="absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2">
    <span class="text-xs tracking-widest uppercase text-white/60">
      <span class="lang-en">Scroll</span>
      <span class="lang-ja">スクロール</span>
    </span>
    <div class="w-px h-12 bg-gradient-to-b from-white to-transparent"></div>
  </div>
</section>

<style>
</style>

<script>
  const video = document.getElementById('hero-video') as HTMLVideoElement;
  const source = document.getElementById('hero-video-source') as HTMLSourceElement;
  
  const updateVideoSource = () => {
    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
    const newSrc = isLight ? '/video/lightloop1.mp4' : '/video/loopingyua.mp4';
    
    if (source.getAttribute('src') !== newSrc) {
      source.setAttribute('src', newSrc);
      video.load();
      video.play();
    }
  };

  // Initial check
  updateVideoSource();

  // Watch for theme changes
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
        updateVideoSource();
      }
    });
  });

  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-theme']
  });
</script>
